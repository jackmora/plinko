/*! For license information please see 584.09e463dd.js.LICENSE.txt */
"use strict";(self.webpackChunkgamebox=self.webpackChunkgamebox||[]).push([[584],{49167:function(t,e,n){n.d(e,{useDrag:function(){return bt},useWheel:function(){return _t}});var i=n(93433),r=n(97326),o=n(11752),s=n(61120),a=n(60136),c=n(29388),u=n(4942),h=n(15671),l=n(43144),f=n(37762),v=n(29439);function d(t,e,n){return Math.max(e,Math.min(t,n))}var p=function(t,e){return void 0===t&&(t=e),Array.isArray(t)?t:[t,t]},y=function(t,e){return[t[0]+e[0],t[1]+e[1]]},g=function(t,e){return[t[0]-e[0],t[1]-e[1]]},m=function(t,e){t[0]+=e[0],t[1]+=e[1]};function k(t,e,n){return 0===e||Math.abs(e)===1/0?Math.pow(t,5*n):t*e*n/(e+n*t)}function b(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===i?d(t,e,n):t<e?-k(e-t,n-e,i)+e:t>n?+k(t-n,n-e,i)+n:t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function E(t){return t?t[0].toUpperCase()+t.slice(1):""}var S=["enter","leave"];function T(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return t&&!S.includes(e)}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=O[t],r=i&&i[e]||e;return"on"+E(t)+E(r)+(T(n,r)?"Capture":"")}var x=["gotpointercapture","lostpointercapture"];function Z(t){var e=t.substring(2).toLowerCase(),n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));var i=x.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:n}}function N(t){return"touches"in t}function I(t){return N(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function B(t){return N(t)?function(t){return"touchend"===t.type||"touchcancel"===t.type?t.changedTouches:t.targetTouches}(t)[0]:t}function R(t){return function(t){return Array.from(t.touches).filter((function(e){var n,i;return e.target===t.currentTarget||(null===(n=t.currentTarget)||void 0===n||null===(i=n.contains)||void 0===i?void 0:i.call(n,e.target))}))}(t).map((function(t){return t.identifier}))}function L(t){var e=B(t);return N(t)?e.identifier:e.pointerId}function P(t){var e=B(t);return[e.clientX,e.clientY]}function D(t){var e=t.deltaX,n=t.deltaY,i=t.deltaMode;return 1===i?(e*=40,n*=40):2===i&&(e*=800,n*=800),[e,n]}function j(t){if("function"===typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}return t}function M(){}function K(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?M:1===e.length?e[0]:function(){var t,n,i=(0,f.Z)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;t=r.apply(this,arguments)||t}}catch(o){i.e(o)}finally{i.f()}return t}}function V(t,e){return Object.assign({},e,t||{})}var F=function(){function t(e,n,i){(0,h.Z)(this,t),this.ctrl=e,this.args=n,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return(0,l.Z)(t,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(t){this.ctrl.state[this.key]=t}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var t=this.state,e=this.shared,n=this.ingKey,i=this.args;e[n]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=i,t.axis=void 0,t.memo=void 0,t.elapsedTime=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}},{key:"start",value:function(t){var e=this.state,n=this.config;e._active||(this.reset(),this.computeInitial(),e._active=!0,e.target=t.target,e.currentTarget=t.currentTarget,e.lastOffset=n.from?j(n.from,e):e.offset,e.offset=e.lastOffset),e.startTime=e.timeStamp=t.timeStamp}},{key:"computeValues",value:function(t){var e=this.state;e._values=t,e.values=this.config.transform(t)}},{key:"computeInitial",value:function(){var t=this.state;t._initial=t._values,t.initial=t.values}},{key:"compute",value:function(t){var e=this.state,n=this.config,i=this.shared;e.args=this.args;var r=0;if(t&&(e.event=t,n.preventDefault&&t.cancelable&&e.event.preventDefault(),e.type=t.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(t){var e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){var n=t.shiftKey,i=t.altKey,r=t.metaKey,o=t.ctrlKey;Object.assign(e,{shiftKey:n,altKey:i,metaKey:r,ctrlKey:o})}return e}(t)),i.down=i.pressed=i.buttons%2===1||i.touches>0,r=t.timeStamp-e.timeStamp,e.timeStamp=t.timeStamp,e.elapsedTime=e.timeStamp-e.startTime),e._active){var o=e._delta.map(Math.abs);m(e._distance,o)}this.axisIntent&&this.axisIntent(t);var s=(0,v.Z)(e._movement,2),a=s[0],c=s[1],u=(0,v.Z)(n.threshold,2),h=u[0],l=u[1],f=e._step,d=e.values;if(n.hasCustomTransform?(!1===f[0]&&(f[0]=Math.abs(a)>=h&&d[0]),!1===f[1]&&(f[1]=Math.abs(c)>=l&&d[1])):(!1===f[0]&&(f[0]=Math.abs(a)>=h&&Math.sign(a)*h),!1===f[1]&&(f[1]=Math.abs(c)>=l&&Math.sign(c)*l)),e.intentional=!1!==f[0]||!1!==f[1],e.intentional){var p=[0,0];if(n.hasCustomTransform){var y=(0,v.Z)(d,2),k=y[0],_=y[1];p[0]=!1!==f[0]?k-f[0]:0,p[1]=!1!==f[1]?_-f[1]:0}else p[0]=!1!==f[0]?a-f[0]:0,p[1]=!1!==f[1]?c-f[1]:0;this.restrictToAxis&&!e._blocked&&this.restrictToAxis(p);var w=e.offset,A=e._active&&!e._blocked||e.active;A&&(e.first=e._active&&!e.active,e.last=!e._active&&e.active,e.active=i[this.ingKey]=e._active,t&&(e.first&&("bounds"in n&&(e._bounds=j(n.bounds,e)),this.setup&&this.setup()),e.movement=p,this.computeOffset()));var O=(0,v.Z)(e.offset,2),E=O[0],S=O[1],T=(0,v.Z)(e._bounds,2),C=(0,v.Z)(T[0],2),x=C[0],Z=C[1],N=(0,v.Z)(T[1],2),I=N[0],B=N[1];e.overflow=[E<x?-1:E>Z?1:0,S<I?-1:S>B?1:0],e._movementBound[0]=!!e.overflow[0]&&(!1===e._movementBound[0]?e._movement[0]:e._movementBound[0]),e._movementBound[1]=!!e.overflow[1]&&(!1===e._movementBound[1]?e._movement[1]:e._movementBound[1]);var R=e._active&&n.rubberband||[0,0];if(e.offset=function(t,e,n){var i=(0,v.Z)(e,2),r=i[0],o=i[1],s=(0,v.Z)(n,2),a=s[0],c=s[1],u=(0,v.Z)(t,2),h=(0,v.Z)(u[0],2),l=h[0],f=h[1],d=(0,v.Z)(u[1],2),p=d[0],y=d[1];return[b(r,l,f,a),b(o,p,y,c)]}(e._bounds,e.offset,R),e.delta=g(e.offset,w),this.computeMovement(),A&&(!e.last||r>32)){e.delta=g(e.offset,w);var L=e.delta.map(Math.abs);m(e.distance,L),e.direction=e.delta.map(Math.sign),e._direction=e._delta.map(Math.sign),!e.first&&r>0&&(e.velocity=[L[0]/r,L[1]/r])}}}},{key:"emit",value:function(){var t=this.state,e=this.shared,n=this.config;if(t._active||this.clean(),!t._blocked&&t.intentional||t._force||n.triggerAllEvents){var i=this.handler(A(A(A({},e),t),{},(0,u.Z)({},this.aliasKey,t.values)));void 0!==i&&(t.memo=i)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),t}();var Y=function(t){(0,a.Z)(n,t);var e=(0,c.Z)(n);function n(){var t;(0,h.Z)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o)),_((0,r.Z)(t),"aliasKey","xy"),t}return(0,l.Z)(n,[{key:"reset",value:function(){(0,o.Z)((0,s.Z)(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=y(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=g(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(t){var e=this.state,n=this.config;if(!e.axis&&t){var i="object"===typeof n.axisThreshold?n.axisThreshold[I(t)]:n.axisThreshold;e.axis=function(t,e){var n=(0,v.Z)(t,2),i=n[0],r=n[1],o=Math.abs(i),s=Math.abs(r);return o>s&&o>e?"x":s>o&&s>e?"y":void 0}(e._movement,i)}e._blocked=(n.lockDirection||!!n.axis)&&!e.axis||!!n.axis&&n.axis!==e.axis}},{key:"restrictToAxis",value:function(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0}}}]),n}(F),q=function(t){return t},U=.15,Q={enabled:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t},eventOptions:function(t,e,n){return A(A({},n.shared.eventOptions),t)},preventDefault:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t},triggerAllEvents:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t},rubberband:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(t){case!0:return[U,U];case!1:return[0,0];default:return p(t)}},from:function(t){return"function"===typeof t?t:null!=t?p(t):void 0},transform:function(t,e,n){var i=t||n.shared.transform;return this.hasCustomTransform=!!i,i||q},threshold:function(t){return p(t,0)}};var z=A(A({},Q),{},{axis:function(t,e,n){var i=n.axis;if(this.lockDirection="lock"===i,!this.lockDirection)return i},axisThreshold:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t},bounds:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof t)return function(e){return z.bounds(t(e))};if("current"in t)return function(){return t.current};if("function"===typeof HTMLElement&&t instanceof HTMLElement)return t;var e=t.left,n=void 0===e?-1/0:e,i=t.right,r=void 0===i?1/0:i,o=t.top,s=void 0===o?-1/0:o,a=t.bottom,c=void 0===a?1/0:a;return[[n,r],[s,c]]}}),$=10,H={ArrowRight:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[$*t,0]},ArrowLeft:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[-10*t,0]},ArrowUp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[0,-10*t]},ArrowDown:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[0,$*t]}},J=function(t){(0,a.Z)(n,t);var e=(0,c.Z)(n);function n(){var t;(0,h.Z)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o)),_((0,r.Z)(t),"ingKey","dragging"),t}return(0,l.Z)(n,[{key:"reset",value:function(){(0,o.Z)((0,s.Z)(n.prototype),"reset",this).call(this);var t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}},{key:"setup",value:function(){var t=this.state;if(t._bounds instanceof HTMLElement){var e=t._bounds.getBoundingClientRect(),n=t.currentTarget.getBoundingClientRect(),i={left:e.left-n.left+t.offset[0],right:e.right-n.right+t.offset[0],top:e.top-n.top+t.offset[1],bottom:e.bottom-n.bottom+t.offset[1]};t._bounds=z.bounds(i)}}},{key:"cancel",value:function(){var t=this,e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((function(){t.compute(),t.emit()}),0))}},{key:"setActive",value:function(){this.state._active=this.state._pointerActive||this.state._keyboardActive}},{key:"clean",value:function(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,(0,o.Z)((0,s.Z)(n.prototype),"clean",this).call(this)}},{key:"pointerDown",value:function(t){var e=this.config,n=this.state;if(null==t.buttons||(Array.isArray(e.pointerButtons)?e.pointerButtons.includes(t.buttons):-1===e.pointerButtons||e.pointerButtons===t.buttons)){var i=this.ctrl.setEventIds(t);e.pointerCapture&&t.target.setPointerCapture(t.pointerId),i&&i.size>1&&n._pointerActive||(this.start(t),this.setupPointer(t),n._pointerId=L(t),n._pointerActive=!0,this.computeValues(P(t)),this.computeInitial(),e.preventScrollAxis&&"mouse"!==I(t)?(n._active=!1,this.setupScrollPrevention(t)):e.delay>0?(this.setupDelayTrigger(t),e.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}}},{key:"startPointerDrag",value:function(t){var e=this.state;e._active=!0,e._preventScroll=!0,e._delayed=!1,this.compute(t),this.emit()}},{key:"pointerMove",value:function(t){var e=this.state,n=this.config;if(e._pointerActive&&(e.type!==t.type||t.timeStamp!==e.timeStamp)){var i=L(t);if(void 0===e._pointerId||i===e._pointerId){var r=P(t);return document.pointerLockElement===t.target?e._delta=[t.movementX,t.movementY]:(e._delta=g(r,e._values),this.computeValues(r)),m(e._movement,e._delta),this.compute(t),e._delayed&&e.intentional?(this.timeoutStore.remove("dragDelay"),e.active=!1,void this.startPointerDrag(t)):n.preventScrollAxis&&!e._preventScroll?e.axis?e.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(e._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(t)):void 0:void this.emit()}}}},{key:"pointerUp",value:function(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch(O){0}var e=this.state,n=this.config;if(e._active&&e._pointerActive){var i=L(t);if(void 0===e._pointerId||i===e._pointerId){this.state._pointerActive=!1,this.setActive(),this.compute(t);var r=(0,v.Z)(e._distance,2),o=r[0],s=r[1];if(e.tap=o<=n.tapsThreshold&&s<=n.tapsThreshold,e.tap&&n.filterTaps)e._force=!0;else{var a=(0,v.Z)(e.direction,2),c=a[0],u=a[1],h=(0,v.Z)(e.velocity,2),l=h[0],f=h[1],d=(0,v.Z)(e.movement,2),p=d[0],y=d[1],g=(0,v.Z)(n.swipe.velocity,2),m=g[0],k=g[1],b=(0,v.Z)(n.swipe.distance,2),_=b[0],w=b[1],A=n.swipe.duration;e.elapsedTime<A&&(Math.abs(l)>m&&Math.abs(p)>_&&(e.swipe[0]=c),Math.abs(f)>k&&Math.abs(y)>w&&(e.swipe[1]=u))}this.emit()}}}},{key:"pointerClick",value:function(t){this.state.tap||(t.preventDefault(),t.stopPropagation())}},{key:"setupPointer",value:function(t){var e=this.config,n=e.device;e.pointerLock&&t.currentTarget.requestPointerLock(),e.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}},{key:"pointerClean",value:function(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}},{key:"preventScroll",value:function(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}},{key:"setupScrollPrevention",value:function(t){this.state._preventScroll=!1,function(t){"persist"in t&&"function"===typeof t.persist&&t.persist()}(t);var e=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",e),this.eventStore.add(this.sharedConfig.window,"touch","cancel",e),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}},{key:"setupDelayTrigger",value:function(t){var e=this;this.state._delayed=!0,this.timeoutStore.add("dragDelay",(function(){e.state._step=[0,0],e.startPointerDrag(t)}),this.config.delay)}},{key:"keyDown",value:function(t){var e=H[t.key];if(e){var n=this.state,i=t.shiftKey?10:t.altKey?.1:1;this.start(t),n._delta=e(i),n._keyboardActive=!0,m(n._movement,n._delta),this.compute(t),this.emit()}}},{key:"keyUp",value:function(t){t.key in H&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}},{key:"bind",value:function(t){var e=this.config.device;t(e,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(e,"change",this.pointerMove.bind(this)),t(e,"end",this.pointerUp.bind(this)),t(e,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this)),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}]),n}(Y);var W="undefined"!==typeof window&&window.document&&window.document.createElement;function X(){return W&&"ontouchstart"in window||W&&window.navigator.maxTouchPoints>1}var G={isBrowser:W,gesture:function(){try{return"constructor"in GestureEvent}catch(t){return!1}}(),touch:X(),touchscreen:X(),pointer:W&&"onpointerdown"in window,pointerLock:W&&"exitPointerLock"in window.document},tt={mouse:0,touch:0,pen:8},et=A(A({},z),{},{device:function(t,e,n){var i=n.pointer,r=(i=void 0===i?{}:i).touch,o=void 0!==r&&r,s=i.lock,a=void 0!==s&&s,c=i.mouse,u=void 0!==c&&c;return this.pointerLock=a&&G.pointerLock,G.touch&&o?"touch":this.pointerLock?"mouse":G.pointer&&!u?"pointer":G.touch?"touch":"mouse"},preventScrollAxis:function(t,e,n){var i=n.preventScroll;if(this.preventScrollDelay="number"===typeof i?i:i||void 0===i&&t?250:void 0,G.touchscreen&&!1!==i)return t||(void 0!==i?"y":void 0)},pointerCapture:function(t,e,n){var i=n.pointer,r=(i=void 0===i?{}:i).capture,o=void 0===r||r,s=i.buttons,a=void 0===s?1:s;return this.pointerButtons=a,!this.pointerLock&&"pointer"===this.device&&o},threshold:function(t,e,n){var i=n.filterTaps,r=void 0!==i&&i,o=n.tapsThreshold,s=void 0===o?3:o,a=n.axis,c=p(t,r?s:(void 0===a?void 0:a)?1:0);return this.filterTaps=r,this.tapsThreshold=s,c},swipe:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.velocity,n=void 0===e?.5:e,i=t.distance,r=void 0===i?50:i,o=t.duration,s=void 0===o?250:o;return{velocity:this.transform(p(n)),distance:this.transform(p(r)),duration:s}},delay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(t){case!0:return 180;case!1:return 0;default:return t}},axisThreshold:function(t){return t?A(A({},tt),t):tt}});A(A({},Q),{},{device:function(t,e,n){var i=n.shared,r=n.pointer,o=(r=void 0===r?{}:r).touch,s=void 0!==o&&o;if(i.target&&!G.touch&&G.gesture)return"gesture";if(G.touch&&s)return"touch";if(G.touchscreen){if(G.pointer)return"pointer";if(G.touch)return"touch"}},bounds:function(t,e,n){var i=n.scaleBounds,r=void 0===i?{}:i,o=n.angleBounds,s=void 0===o?{}:o,a=function(t){var e=V(j(r,t),{min:-1/0,max:1/0});return[e.min,e.max]},c=function(t){var e=V(j(s,t),{min:-1/0,max:1/0});return[e.min,e.max]};return"function"!==typeof r&&"function"!==typeof s?[a(),c()]:function(t){return[a(t),c(t)]}},threshold:function(t,e,n){this.lockDirection="lock"===n.axis;var i=p(t,this.lockDirection?[.1,3]:0);return i},modifierKey:function(t){return void 0===t?"ctrlKey":t}}),A(A({},z),{},{mouseOnly:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t}});var nt=function(t){(0,a.Z)(n,t);var e=(0,c.Z)(n);function n(){var t;(0,h.Z)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o)),_((0,r.Z)(t),"ingKey","wheeling"),t}return(0,l.Z)(n,[{key:"wheel",value:function(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}},{key:"wheelChange",value:function(t){var e=this.state;e._delta=D(t),m(e._movement,e._delta);var n=(0,v.Z)(e.overflow,2),i=n[0],r=n[1],o=(0,v.Z)(e._delta,2),s=o[0],a=o[1],c=(0,v.Z)(e._direction,2),u=c[0],h=c[1];(i<0&&s>0&&u<0||i>0&&s<0&&u>0)&&(e._movement[0]=e._movementBound[0]),(r<0&&a>0&&h<0||r>0&&a<0&&h>0)&&(e._movement[1]=e._movementBound[1]),this.compute(t),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(t){t("wheel","",this.wheel.bind(this))}}]),n}(Y),it=z,rt=(A(A({},z),{},{mouseOnly:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t}}),new Map),ot=new Map;function st(t){rt.set(t.key,t.engine),ot.set(t.key,t.resolver)}var at={key:"drag",engine:J,resolver:et},ct={key:"wheel",engine:nt,resolver:it},ut=n(47313);function ht(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var lt={target:function(t){if(t)return function(){return"current"in t?t.current:t}},enabled:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t},window:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.isBrowser?window:void 0;return t})),eventOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.passive,n=void 0===e||e,i=t.capture,r=void 0!==i&&i;return{passive:n,capture:r}},transform:function(t){return t}},ft=["target","eventOptions","window","enabled","transform"];function vt(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n={},i=0,r=Object.entries(e);i<r.length;i++){var o=(0,v.Z)(r[i],2),s=o[0],a=o[1];switch(typeof a){case"function":n[s]=a.call(n,t[s],s,t);break;case"object":n[s]=vt(t[s],a);break;case"boolean":a&&(n[s]=t[s])}}return n}var dt=function(){function t(e,n){(0,h.Z)(this,t),_(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}return(0,l.Z)(t,[{key:"add",value:function(t,e,n,i,r){var o=this._listeners,s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=O[t],i=n&&n[e]||e;return t+i}(e,n),a=A(A({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),r);t.addEventListener(s,i,a);var c=function e(){t.removeEventListener(s,i,a),o.delete(e)};return o.add(c),c}},{key:"clean",value:function(){this._listeners.forEach((function(t){return t()})),this._listeners.clear()}}]),t}(),pt=function(){function t(){(0,h.Z)(this,t),_(this,"_timeouts",new Map)}return(0,l.Z)(t,[{key:"add",value:function(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(t);for(var r=arguments.length,o=new Array(r>3?r-3:0),s=3;s<r;s++)o[s-3]=arguments[s];this._timeouts.set(t,(n=window).setTimeout.apply(n,[e,i].concat(o)))}},{key:"remove",value:function(t){var e=this._timeouts.get(t);e&&window.clearTimeout(e)}},{key:"clean",value:function(){this._timeouts.forEach((function(t){window.clearTimeout(t)})),this._timeouts.clear()}}]),t}(),yt=function(){function t(e){(0,h.Z)(this,t),_(this,"gestures",new Set),_(this,"_targetEventStore",new dt(this)),_(this,"gestureEventStores",{}),_(this,"gestureTimeoutStores",{}),_(this,"handlers",{}),_(this,"config",{}),_(this,"pointerIds",new Set),_(this,"touchIds",new Set),_(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(t,e){e.drag&&gt(t,"drag");e.wheel&&gt(t,"wheel");e.scroll&&gt(t,"scroll");e.move&&gt(t,"move");e.pinch&&gt(t,"pinch");e.hover&&gt(t,"hover")}(this,e)}return(0,l.Z)(t,[{key:"setEventIds",value:function(t){return N(t)?(this.touchIds=new Set(R(t)),this.touchIds):"pointerId"in t?("pointerup"===t.type||"pointercancel"===t.type?this.pointerIds.delete(t.pointerId):"pointerdown"===t.type&&this.pointerIds.add(t.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(t,e){this.handlers=t,this.nativeHandlers=e}},{key:"applyConfig",value:function(t,e){this.config=function(t,e){var n=t,i=n.target,r=n.eventOptions,o=n.window,s=n.enabled,a=n.transform,c=ht(n,ft),u={shared:vt({target:i,eventOptions:r,window:o,enabled:s,transform:a},lt)};if(e){var h=ot.get(e);u[e]=vt(A({shared:u.shared},c),h)}else for(var l in c){var f=ot.get(l);f&&(u[l]=vt(A({shared:u.shared},c[l]),f))}return u}(t,e)}},{key:"clean",value:function(){this._targetEventStore.clean();var t,e=(0,f.Z)(this.gestures);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(i){e.e(i)}finally{e.f()}}},{key:"effect",value:function(){var t=this;return this.config.shared.target&&this.bind(),function(){return t._targetEventStore.clean()}}},{key:"bind",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o,s=this.config.shared,a={};if(!s.target||(o=s.target())){if(s.enabled){var c,u=(0,f.Z)(this.gestures);try{for(u.s();!(c=u.n()).done;){var h=c.value,l=this.config[h],v=mt(a,l.eventOptions,!!o);if(l.enabled){var d=rt.get(h);new d(this,n,h).bind(v)}}}catch(E){u.e(E)}finally{u.f()}var p=mt(a,s.eventOptions,!!o),y=function(e){p(e,"",(function(i){return t.nativeHandlers[e](A(A({},t.state.shared),{},{event:i,args:n}))}),void 0,!0)};for(var g in this.nativeHandlers)y(g)}for(var m in a)a[m]=K.apply(void 0,(0,i.Z)(a[m]));if(!o)return a;for(var k in a){var b=Z(k),_=b.device,w=b.capture,O=b.passive;this._targetEventStore.add(o,_,"",a[k],{capture:w,passive:O})}}}}]),t}();function gt(t,e){t.gestures.add(e),t.gestureEventStores[e]=new dt(t,e),t.gestureTimeoutStores[e]=new pt}var mt=function(t,e,n){return function(i,r,o){var s,a,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h=null!==(s=c.capture)&&void 0!==s?s:e.capture,l=null!==(a=c.passive)&&void 0!==a?a:e.passive,f=u?i:C(i,r,h);n&&l&&(f+="Passive"),t[f]=t[f]||[],t[f].push(o)}};function kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=ut.useMemo((function(){return new yt(t)}),[]);if(r.applyHandlers(t,i),r.applyConfig(e,n),ut.useEffect(r.effect.bind(r)),ut.useEffect((function(){return r.clean.bind(r)}),[]),void 0===e.target)return r.bind.bind(r)}function bt(t,e){return st(at),kt({drag:t},e||{},"drag")}function _t(t,e){return st(ct),kt({wheel:t},e||{},"wheel")}},13095:function(t,e){function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<o(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,s=r>>>1;i<s;){var a=2*(i+1)-1,c=t[a],u=a+1,h=t[u];if(0>o(c,n))u<r&&0>o(h,c)?(t[i]=h,t[u]=n,i=u):(t[i]=c,t[a]=n,i=a);else{if(!(u<r&&0>o(h,n)))break t;t[i]=h,t[u]=n,i=u}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();e.unstable_now=function(){return a.now()-c}}var u=[],h=[],l=1,f=null,v=3,d=!1,p=!1,y=!1,g="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=i(h);null!==e;){if(null===e.callback)r(h);else{if(!(e.startTime<=t))break;r(h),e.sortIndex=e.expirationTime,n(u,e)}e=i(h)}}function _(t){if(y=!1,b(t),!p)if(null!==i(u))p=!0,B(w);else{var e=i(h);null!==e&&R(_,e.startTime-t)}}function w(t,n){p=!1,y&&(y=!1,m(S),S=-1),d=!0;var o=v;try{for(b(n),f=i(u);null!==f&&(!(f.expirationTime>n)||t&&!x());){var s=f.callback;if("function"===typeof s){f.callback=null,v=f.priorityLevel;var a=s(f.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?f.callback=a:f===i(u)&&r(u),b(n)}else r(u);f=i(u)}if(null!==f)var c=!0;else{var l=i(h);null!==l&&R(_,l.startTime-n),c=!1}return c}finally{f=null,v=o,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,O=!1,E=null,S=-1,T=5,C=-1;function x(){return!(e.unstable_now()-C<T)}function Z(){if(null!==E){var t=e.unstable_now();C=t;var n=!0;try{n=E(!0,t)}finally{n?A():(O=!1,E=null)}}else O=!1}if("function"===typeof k)A=function(){k(Z)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,I=N.port2;N.port1.onmessage=Z,A=function(){I.postMessage(null)}}else A=function(){g(Z,0)};function B(t){E=t,O||(O=!0,A())}function R(t,n){S=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){p||d||(p=!0,B(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return i(u)},e.unstable_next=function(t){switch(v){case 1:case 2:case 3:var e=3;break;default:e=v}var n=v;v=e;try{return t()}finally{v=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=v;v=t;try{return e()}finally{v=n}},e.unstable_scheduleCallback=function(t,r,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:l++,callback:r,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,n(h,t),null===i(u)&&t===i(h)&&(y?(m(S),S=-1):y=!0,R(_,o-s))):(t.sortIndex=a,n(u,t),p||d||(p=!0,B(w))),t},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(t){var e=v;return function(){var n=v;v=e;try{return t.apply(this,arguments)}finally{v=n}}}},62224:function(t,e,n){t.exports=n(13095)},55753:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.staged=void 0;var r=i(n(47313));function o(t){return"function"===typeof t?r.default.createElement(s,{stage:t}):t}function s(t){return o(t.stage())}e.staged=function(t){return function(e,n){return o(t(e,n))}}},21531:function(t,e,n){var i=n(47313);var r="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},o=i.useState,s=i.useEffect,a=i.useLayoutEffect,c=i.useDebugValue;function u(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!r(t,n)}catch(i){return!0}}var h="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),i=o({inst:{value:n,getSnapshot:e}}),r=i[0].inst,h=i[1];return a((function(){r.value=n,r.getSnapshot=e,u(r)&&h({inst:r})}),[t,n,e]),s((function(){return u(r)&&h({inst:r}),t((function(){u(r)&&h({inst:r})}))}),[t]),c(n),n};e.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:h},45531:function(t,e,n){var i=n(47313),r=n(51239);var o="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},s=r.useSyncExternalStore,a=i.useRef,c=i.useEffect,u=i.useMemo,h=i.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var l=a(null);if(null===l.current){var f={hasValue:!1,value:null};l.current=f}else f=l.current;l=u((function(){function t(t){if(!c){if(c=!0,s=t,t=i(t),void 0!==r&&f.hasValue){var e=f.value;if(r(e,t))return a=e}return a=t}if(e=a,o(s,t))return e;var n=i(t);return void 0!==r&&r(e,n)?e:(s=t,a=n)}var s,a,c=!1,u=void 0===n?null:n;return[function(){return t(e())},null===u?void 0:function(){return t(u())}]}),[e,n,i,r]);var v=s(t,l[0],l[1]);return c((function(){f.hasValue=!0,f.value=v}),[v]),h(v),v}},51239:function(t,e,n){t.exports=n(21531)},37058:function(t,e,n){t.exports=n(45531)},41331:function(t,e,n){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}n.d(e,{Q:function(){return i}}),i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e)}return this},i.prototype.emitReserved=i.prototype.emit,i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},46747:function(t,e,n){n.d(e,{io:function(){return D}});var i={};n.r(i),n.d(i,{Decoder:function(){return x},Encoder:function(){return T},PacketType:function(){return O},protocol:function(){return S}});var r=n(96751);var o=n(15671),s=n(43144),a=n(97326),c=n(60136),u=n(29388),h=n(37762),l=n(11752),f=n(61120),v=n(41331),d="function"===typeof ArrayBuffer,p=Object.prototype.toString,y="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===p.call(Blob),g="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===p.call(File);function m(t){return d&&(t instanceof ArrayBuffer||function(t){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))||y&&t instanceof Blob||g&&t instanceof File}function k(t,e){if(!t||"object"!==typeof t)return!1;if(Array.isArray(t)){for(var n=0,i=t.length;n<i;n++)if(k(t[n]))return!0;return!1}if(m(t))return!0;if(t.toJSON&&"function"===typeof t.toJSON&&1===arguments.length)return k(t.toJSON(),!0);for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&k(t[r]))return!0;return!1}function b(t){var e=[],n=t.data,i=t;return i.data=_(n,e),i.attachments=e.length,{packet:i,buffers:e}}function _(t,e){if(!t)return t;if(m(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){for(var i=new Array(t.length),r=0;r<t.length;r++)i[r]=_(t[r],e);return i}if("object"===typeof t&&!(t instanceof Date)){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(o[s]=_(t[s],e));return o}return t}function w(t,e){return t.data=A(t.data,e),delete t.attachments,t}function A(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"===typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=A(t[n],e);else if("object"===typeof t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=A(t[i],e));return t}var O,E=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],S=5;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(O||(O={}));var T=function(){function t(e){(0,o.Z)(this,t),this.replacer=e}return(0,s.Z)(t,[{key:"encode",value:function(t){return t.type!==O.EVENT&&t.type!==O.ACK||!k(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===O.EVENT?O.BINARY_EVENT:O.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}},{key:"encodeAsString",value:function(t){var e=""+t.type;return t.type!==O.BINARY_EVENT&&t.type!==O.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}},{key:"encodeAsBinary",value:function(t){var e=b(t),n=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(n),i}}]),t}();function C(t){return"[object Object]"===Object.prototype.toString.call(t)}var x=function(t){(0,c.Z)(n,t);var e=(0,u.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this)).reviver=t,i}return(0,s.Z)(n,[{key:"add",value:function(t){var e;if("string"===typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var i=(e=this.decodeString(t)).type===O.BINARY_EVENT;i||e.type===O.BINARY_ACK?(e.type=i?O.EVENT:O.ACK,this.reconstructor=new Z(e),0===e.attachments&&(0,l.Z)((0,f.Z)(n.prototype),"emitReserved",this).call(this,"decoded",e)):(0,l.Z)((0,f.Z)(n.prototype),"emitReserved",this).call(this,"decoded",e)}else{if(!m(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,(0,l.Z)((0,f.Z)(n.prototype),"emitReserved",this).call(this,"decoded",e))}}},{key:"decodeString",value:function(t){var e=0,i={type:Number(t.charAt(0))};if(void 0===O[i.type])throw new Error("unknown packet type "+i.type);if(i.type===O.BINARY_EVENT||i.type===O.BINARY_ACK){for(var r=e+1;"-"!==t.charAt(++e)&&e!=t.length;);var o=t.substring(r,e);if(o!=Number(o)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===t.charAt(e+1)){for(var s=e+1;++e;){if(","===t.charAt(e))break;if(e===t.length)break}i.nsp=t.substring(s,e)}else i.nsp="/";var a=t.charAt(e+1);if(""!==a&&Number(a)==a){for(var c=e+1;++e;){var u=t.charAt(e);if(null==u||Number(u)!=u){--e;break}if(e===t.length)break}i.id=Number(t.substring(c,e+1))}if(t.charAt(++e)){var h=this.tryParse(t.substr(e));if(!n.isPayloadValid(i.type,h))throw new Error("invalid payload");i.data=h}return i}},{key:"tryParse",value:function(t){try{return JSON.parse(t,this.reviver)}catch(e){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(t,e){switch(t){case O.CONNECT:return C(e);case O.DISCONNECT:return void 0===e;case O.CONNECT_ERROR:return"string"===typeof e||C(e);case O.EVENT:case O.BINARY_EVENT:return Array.isArray(e)&&("number"===typeof e[0]||"string"===typeof e[0]&&-1===E.indexOf(e[0]));case O.ACK:case O.BINARY_ACK:return Array.isArray(e)}}}]),n}(v.Q),Z=function(){function t(e){(0,o.Z)(this,t),this.packet=e,this.buffers=[],this.reconPack=e}return(0,s.Z)(t,[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=w(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),t}();function N(t,e,n){return t.on(e,n),function(){t.off(e,n)}}var I=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),B=function(t){(0,c.Z)(n,t);var e=(0,u.Z)(n);function n(t,i,r){var s;return(0,o.Z)(this,n),(s=e.call(this)).connected=!1,s.recovered=!1,s.receiveBuffer=[],s.sendBuffer=[],s._queue=[],s._queueSeq=0,s.ids=0,s.acks={},s.flags={},s.io=t,s.nsp=i,r&&r.auth&&(s.auth=r.auth),s._opts=Object.assign({},r),s.io._autoConnect&&s.open(),s}return(0,s.Z)(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var t=this.io;this.subs=[N(t,"open",this.onopen.bind(this)),N(t,"packet",this.onpacket.bind(this)),N(t,"error",this.onerror.bind(this)),N(t,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}},{key:"emit",value:function(t){if(I.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var r={type:O.EVENT,data:n,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var o=this.ids++,s=n.pop();this._registerAckCallback(o,s),r.id=o}var a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,c=this.flags.volatile&&(!a||!this.connected);return c||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}},{key:"_registerAckCallback",value:function(t,e){var n,i=this,r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==r){var o=this.io.setTimeoutFn((function(){delete i.acks[t];for(var n=0;n<i.sendBuffer.length;n++)i.sendBuffer[n].id===t&&i.sendBuffer.splice(n,1);e.call(i,new Error("operation has timed out"))}),r);this.acks[t]=function(){i.io.clearTimeoutFn(o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.apply(i,[null].concat(n))}}else this.acks[t]=e}},{key:"emitWithAck",value:function(t){for(var e=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((function(n,r){i.push((function(t,e){return o?t?r(t):n(e):n(t)})),e.emit.apply(e,[t].concat(i))}))}},{key:"_addToQueue",value:function(t){var e,n=this;"function"===typeof t[t.length-1]&&(e=t.pop());var i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((function(t){if(i===n._queue[0]){var r=null!==t;if(r)i.tryCount>n._opts.retries&&(n._queue.shift(),e&&e(t));else if(n._queue.shift(),e){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];e.apply(void 0,[null].concat(s))}return i.pending=!1,n._drainQueue()}})),this._queue.push(i),this._drainQueue()}},{key:"_drainQueue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var t=this;"function"==typeof this.auth?this.auth((function(e){t._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(t){this.packet({type:O.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case O.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case O.EVENT:case O.BINARY_EVENT:this.onevent(t);break;case O.ACK:case O.BINARY_ACK:this.onack(t);break;case O.DISCONNECT:this.ondisconnect();break;case O.CONNECT_ERROR:this.destroy();var e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}},{key:"onevent",value:function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}},{key:"emitEvent",value:function(t){if(this._anyListeners&&this._anyListeners.length){var e,i=this._anyListeners.slice(),r=(0,h.Z)(i);try{for(r.s();!(e=r.n()).done;){e.value.apply(this,t)}}catch(o){r.e(o)}finally{r.f()}}(0,l.Z)((0,f.Z)(n.prototype),"emit",this).apply(this,t),this._pid&&t.length&&"string"===typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}},{key:"ack",value:function(t){var e=this,n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];e.packet({type:O.ACK,id:t,data:r})}}}},{key:"onack",value:function(t){var e=this.acks[t.id];"function"===typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}},{key:"onconnect",value:function(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var t=this;this.receiveBuffer.forEach((function(e){return t.emitEvent(e)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(e){t.notifyOutgoingListeners(e),t.packet(e)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(t){return t()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:O.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(t){return this.flags.timeout=t,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}},{key:"prependAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}},{key:"offAnyOutgoing",value:function(t){if(!this._anyOutgoingListeners)return this;if(t){for(var e=this._anyOutgoingListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var e,n=this._anyOutgoingListeners.slice(),i=(0,h.Z)(n);try{for(i.s();!(e=i.n()).done;){e.value.apply(this,t.data)}}catch(r){i.e(r)}finally{i.f()}}}}]),n}(v.Q);function R(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}R.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},R.prototype.reset=function(){this.attempts=0},R.prototype.setMin=function(t){this.ms=t},R.prototype.setMax=function(t){this.max=t},R.prototype.setJitter=function(t){this.jitter=t};var L=function(t){(0,c.Z)(n,t);var e=(0,u.Z)(n);function n(t,s){var c,u;(0,o.Z)(this,n),(c=e.call(this)).nsps={},c.subs=[],t&&"object"===typeof t&&(s=t,t=void 0),(s=s||{}).path=s.path||"/socket.io",c.opts=s,(0,r.Vq)((0,a.Z)(c),s),c.reconnection(!1!==s.reconnection),c.reconnectionAttempts(s.reconnectionAttempts||1/0),c.reconnectionDelay(s.reconnectionDelay||1e3),c.reconnectionDelayMax(s.reconnectionDelayMax||5e3),c.randomizationFactor(null!==(u=s.randomizationFactor)&&void 0!==u?u:.5),c.backoff=new R({min:c.reconnectionDelay(),max:c.reconnectionDelayMax(),jitter:c.randomizationFactor()}),c.timeout(null==s.timeout?2e4:s.timeout),c._readyState="closed",c.uri=t;var h=s.parser||i;return c.encoder=new h.Encoder,c.decoder=new h.Decoder,c._autoConnect=!1!==s.autoConnect,c._autoConnect&&c.open(),c}return(0,s.Z)(n,[{key:"reconnection",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(t){var e=this;if(~this._readyState.indexOf("open"))return this;this.engine=new r.sk(this.uri,this.opts);var n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;var o=N(n,"open",(function(){i.onopen(),t&&t()})),s=function(n){e.cleanup(),e._readyState="closed",e.emitReserved("error",n),t?t(n):e.maybeReconnectOnOpen()},a=N(n,"error",s);if(!1!==this._timeout){var c=this._timeout,u=this.setTimeoutFn((function(){o(),s(new Error("timeout")),n.close()}),c);this.opts.autoUnref&&u.unref(),this.subs.push((function(){e.clearTimeoutFn(u)}))}return this.subs.push(o),this.subs.push(a),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(N(t,"ping",this.onping.bind(this)),N(t,"data",this.ondata.bind(this)),N(t,"error",this.onerror.bind(this)),N(t,"close",this.onclose.bind(this)),N(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}},{key:"ondecoded",value:function(t){var e=this;(0,r.Y3)((function(){e.emitReserved("packet",t)}),this.setTimeoutFn)}},{key:"onerror",value:function(t){this.emitReserved("error",t)}},{key:"socket",value:function(t,e){var n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new B(this,t,e),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var i=n[e];if(this.nsps[i].active)return}this._close()}},{key:"_packet",value:function(t){for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(t){return t()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var i=this.setTimeoutFn((function(){e.skipReconnect||(t.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((function(n){n?(e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):e.onreconnect()})))}),n);this.opts.autoUnref&&i.unref(),this.subs.push((function(){t.clearTimeoutFn(i)}))}}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}]),n}(v.Q),P={};function D(t,e){"object"===typeof t&&(e=t,t=void 0);var n,i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=t;n=n||"undefined"!==typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"===typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t="undefined"!==typeof n?n.protocol+"//"+t:"https://"+t),i=(0,r.Qc)(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var o=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}(t,(e=e||{}).path||"/socket.io"),o=i.source,s=i.id,a=i.path,c=P[s]&&a in P[s].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||c?n=new L(o,e):(P[s]||(P[s]=new L(o,e)),n=P[s]),i.query&&!e.query&&(e.query=i.queryKey),n.socket(i.path,e)}Object.assign(D,{Manager:L,Socket:B,io:D,connect:D})}}]);